<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Localization </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Localization ">
    <meta name="generator" content="docfx 2.56.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="localization">Localization</h1>

<p>Localizations are string conversions for language tokens that are bound to in-game objects. These language tokens are replaced at runtime by their specified localization, and can be thought of as a key value dataset. An example of a localization token may be <code>$item_stoneAxe</code>, which might have multiple localizations to translate into different languages at runtime.</p>
<p>JVL provides a number of different methods to interface with our localization system, to allow both developers as well as the community at large to provide localizations for both custom items, as well as non supported languages.</p>
<p><strong>Note</strong>: This example requires <a href="assets.html">assets</a> to be loaded.</p>
<h2 id="preparing-your-assets">Preparing your assets</h2>
<p>In order to facilitate our localizations, we must prepare our assets to ensure they are able to accept our localization strings. The game follows the convention that language tokens are prefixed with a <code>$</code> to signify the string is a token due for replacement. Common properties which accept tokens are things such as names, descriptions, and flavourtext. The following name thereafter must be unique, but can follow any format the user desires.</p>
<p>Convention within the game however states that items follow the <code>$item_{name}</code> <code>$item_{name}_description</code> formats, similarly buildable items are prefixed with <code>$piece_</code> instead.</p>
<h2 id="format">Format</h2>
<p>The format for localizations is a standard json collection as such:</p>
<pre><code class="lang-cs">{ &quot;item_evilsword&quot;, &quot;Sword of Darkness&quot; },
{ &quot;item_evilsword_desc&quot;, &quot;Bringing the light&quot; }
</code></pre><h2 id="side-loading-localizations">Side loading localizations</h2>
<p>Localizations can be provide through loading side by side with your plugin. The folder structure which will be queried will be <code>Translations/{LanguageName}/{anyname}.json</code>, and can be placed in any sub directory within your plugin.
An example of a path which will be read for localization at run time may be: <code>BepInEx/plugins/JotunnModExample/Assets/Translations/English/backpack.json</code>. 
All .json files within such a directory will be iterated through and localizations added for each of those languages.</p>
<h2 id="hardcoding">Hardcoding</h2>
<p>Localizations may also be hardcoded into your plugin by invoking the <a class="xref" href="../../api/Jotunn.Managers.LocalizationManager.html#Jotunn_Managers_LocalizationManager_AddLocalization_Jotunn_Configs_LocalizationConfig_">AddLocalization</a> method.</p>
<pre><code class="lang-cs">// Add translations for the custom item in AddClonedItems
LocalizationManager.Instance.AddLocalization(new LocalizationConfig(&quot;English&quot;)
{
    Translations = {
        {&quot;item_evilsword&quot;, &quot;Sword of Darkness&quot;}, {&quot;item_evilsword_desc&quot;, &quot;Bringing the ight&quot;},
        {&quot;evilsword_shwing&quot;, &quot;Woooosh&quot;}, {&quot;evilsword_scroll&quot;, &quot;*scroll*&quot;},
        {&quot;evilsword_beevil&quot;, &quot;Be evil&quot;}, {&quot;evilsword_beevilmessage&quot;, &quot;:reee:&quot;},
        {&quot;evilsword_effectname&quot;, &quot;Evil&quot;}, {&quot;evilsword_effectstart&quot;, &quot;You feel evil&quot;},
        {&quot;evilsword_effectstop&quot;, &quot;You feel nice again&quot;}
    }
});

// Add translations for the custom piece in addEmptyItems
LocalizationManager.Instance.AddLocalization(new LocalizationConfig(&quot;English&quot;)
{
    Translations =
    {
        { &quot;piece_lul&quot;, &quot;Lulz&quot; }
    }
});
</code></pre><p><img src="../../Documentation/images/data/EvilSwordLocalizations.png" alt="Evil Sword Localizations"></p>
<h2 id="prefabs">Prefabs</h2>
<p>It is also possible to package <code>TextAsset</code>&#39;s inside of your asset bundles, and to load them into game at runtime via <a class="xref" href="../../api/Jotunn.Managers.LocalizationManager.html#Jotunn_Managers_LocalizationManager_AddJson_System_String_System_String_">AddJson</a>. In this example, we use our filenames to provide the language which we wish to add the translations for:</p>
<pre><code class="lang-cs">TextAsset[] textAssets = BlueprintRuneBundle.LoadAllAssets&lt;TextAsset&gt;();
foreach (var textAsset in textAssets)
{
    var lang = textAsset.name.Replace(&quot;.json&quot;, null);
    LocalizationManager.Instance.AddJson(lang, textAsset.ToString());
}
</code></pre><p><img src="../../Documentation/images/data/blueprintRuneLocalizations.png" alt="Blueprint Rune Localizations"></p>
<h2 id="example-json-file">Example JSON file</h2>
<p>This is how the JSON file looks like which is deliverd as a TextAsset in the asset bundle for the Blueprint Rune example:</p>
<pre><code class="lang-json">{
  &quot;item_blueprintrune&quot;: &quot;Blueprint Rune&quot;,
  &quot;item_blueprintrune_desc&quot;: &quot;Used to make copies of structures and rebuild exact copies of them somewhere else.&quot;,
  &quot;make_blueprint&quot;: &quot;Create new blueprint&quot;,
  &quot;make_blueprint_desc&quot;: &quot;Creates a new blueprint of a structure.&quot;,
  &quot;piece_blueprint&quot;: &quot;Blueprint&quot;,
  &quot;piece_blueprint_desc&quot;: &quot;Creates the structure attached to this blueprint.&quot;
}
</code></pre></article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Valheim-Modding/Jotunn/blob/51c9fcf56710516661c2146effdf62ea682045c9/JotunnLib/Documentation/tutorials/data/localization.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
